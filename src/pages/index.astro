---
import Layout from "@/layouts/Layout.astro"

import HeroKeyBackground from "@/assets/hero-key-background.webp"
import PlayButtonIcon from "@/assets/play-button.svg"
---

<Layout>
  <div id="logo-mask" class="fixed top-0 w-full h-screen">
    <div
      id="scroll-logo-wrapper"
      class="absolute top-[25%] left-1/2 -translate-x-1/2 w-[5000vh] h-auto opacity-0 pointer-events-none"
    >
      <img
        id="scroll-logo"
        src="/new-logo.png"
        class="w-full h-auto object-contain"
        alt="Logo"
      />
    </div>
    <section>
      <picture
        id="hero-key"
        class="h-screen scale-125 block overflow-hidden fixed"
      >
        <img
          id="hero-key-logo"
          src="/new-logo.png"
          class="absolute w-1/4 h-1/4 object-contain top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
        />
        <img
          id="hero-key-background"
          src={HeroKeyBackground.src}
          class="w-full h-full object-cover"
        />
      </picture>
    </section>
  </div>

  <div
    class="fixed flex flex-col items-center justify-between h-screen px-20 py-16 w-full"
  >
    <header class="flex justify-between w-full">
      <img
        src="/new-logo.png"
        alt="Logo"
        class="size-11 object-contain hover:opacity-80 transition-opacity duration-500 cursor-pointer"
      />
    </header>

    <button class="absolute inset-0 m-auto cursor-pointer inline-block">
      <PlayButtonIcon
        id="hero-play-button"
        class="text-white m-auto size-32 mt-10 backdrop-blur-3xl rounded-full hover:scale-110 transition-transform duration-500"
      />
    </button>

    <footer id="hero-footer" class="absolute bottom-8 m-auto">
      <img
        src="/new-logo.png"
        alt="Cosecha Creativa"
        class="w-38 h-auto object-contain drop-shadow-[0_0_2px_rgba(255,255,255,.5),0_0_8px_#000]"
      />
      <span
        class="absolute uppercase tracking-[6px] whitespace-nowrap text-center top-[49px] font-medium text-shadow-[0_0_2px_rgba(255,255,255,.5),0_0_8px_#000] left-1/2 -translate-x-1/2 text-lg"
      >
        Ver el Tr√°iler 2
      </span>
    </footer>
  </div>

  <section id="content-section" class="relative z-10 min-h-screen bg-black flex items-center justify-center overflow-hidden">
    <div class="neon-container relative w-full h-screen flex items-center justify-center">
      <div class="neon-glow absolute inset-0"></div>
      <div class="neon-glow-2 absolute inset-0"></div>
      <img
        id="neon-image"
        src="/recurso-12.png"
        alt="Cosecha Creativa"
        class="relative z-10 w-full h-full object-cover neon-image"
      />
      <div class="scanlines absolute inset-0 pointer-events-none"></div>
    </div>
  </section>
</Layout>

<style>
  #logo-mask {
    background: white;
    background-image: url("/new-logo.png");
    background-size: clamp(5000vh, 3500%, 0vh);
    background-position: center 25%;
    background-repeat: no-repeat;
    mask-image: url("/logo-stack.svg");
    mask-position: center 25%;
    mask-repeat: no-repeat;
    mask-size: clamp(5000vh, 3500%, 0vh);
  }
  
  #scroll-logo-wrapper {
    z-index: 10;
  }

  /* Neon Effects */
  .neon-container {
    position: relative;
  }

  .neon-glow {
    background: radial-gradient(
      circle at center,
      rgba(0, 255, 255, 0.3) 0%,
      rgba(255, 0, 255, 0.2) 30%,
      rgba(0, 255, 255, 0.1) 60%,
      transparent 100%
    );
    animation: pulse-glow 3s ease-in-out infinite;
    filter: blur(60px);
  }

  .neon-glow-2 {
    background: radial-gradient(
      circle at center,
      rgba(255, 0, 255, 0.3) 0%,
      rgba(0, 255, 255, 0.2) 30%,
      rgba(255, 0, 255, 0.1) 60%,
      transparent 100%
    );
    animation: pulse-glow-2 4s ease-in-out infinite;
    filter: blur(80px);
  }

  @keyframes pulse-glow {
    0%, 100% {
      opacity: 0.6;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.1);
    }
  }

  @keyframes pulse-glow-2 {
    0%, 100% {
      opacity: 0.4;
      transform: scale(1.1);
    }
    50% {
      opacity: 0.8;
      transform: scale(1);
    }
  }

  .neon-image {
    filter: drop-shadow(0 0 20px rgba(0, 255, 255, 0.5))
            drop-shadow(0 0 40px rgba(255, 0, 255, 0.3))
            drop-shadow(0 0 60px rgba(0, 255, 255, 0.2));
    animation: neon-flicker 4s ease-in-out infinite;
    transition: filter 0.3s ease;
  }

  .neon-image:hover {
    filter: drop-shadow(0 0 30px rgba(0, 255, 255, 0.8))
            drop-shadow(0 0 60px rgba(255, 0, 255, 0.5))
            drop-shadow(0 0 90px rgba(0, 255, 255, 0.3));
  }

  @keyframes neon-flicker {
    0%, 100% {
      filter: drop-shadow(0 0 20px rgba(0, 255, 255, 0.5))
              drop-shadow(0 0 40px rgba(255, 0, 255, 0.3))
              drop-shadow(0 0 60px rgba(0, 255, 255, 0.2));
    }
    25% {
      filter: drop-shadow(0 0 25px rgba(0, 255, 255, 0.6))
              drop-shadow(0 0 50px rgba(255, 0, 255, 0.4))
              drop-shadow(0 0 70px rgba(0, 255, 255, 0.3));
    }
    50% {
      filter: drop-shadow(0 0 15px rgba(0, 255, 255, 0.4))
              drop-shadow(0 0 35px rgba(255, 0, 255, 0.2))
              drop-shadow(0 0 55px rgba(0, 255, 255, 0.1));
    }
    75% {
      filter: drop-shadow(0 0 25px rgba(0, 255, 255, 0.6))
              drop-shadow(0 0 50px rgba(255, 0, 255, 0.4))
              drop-shadow(0 0 70px rgba(0, 255, 255, 0.3));
    }
  }

  .scanlines {
    background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.15),
      rgba(0, 0, 0, 0.15) 1px,
      transparent 1px,
      transparent 2px
    );
    animation: scanline-move 8s linear infinite;
    opacity: 0.3;
  }

  @keyframes scanline-move {
    0% {
      transform: translateY(0);
    }
    100% {
      transform: translateY(100vh);
    }
  }

  #content-section {
    background: linear-gradient(
      135deg,
      #000000 0%,
      #0a0a1a 25%,
      #1a0a2e 50%,
      #0a0a1a 75%,
      #000000 100%
    );
    background-size: 400% 400%;
    animation: gradient-shift 10s ease infinite;
  }

  @keyframes gradient-shift {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }
</style>

<script>
  import { gsap } from "gsap"
  import { ScrollTrigger } from "gsap/ScrollTrigger"

  gsap.registerPlugin(ScrollTrigger)

  const tl = gsap.timeline({
    ease: "power2.out",
    scrollTrigger: {
      scrub: 1,
    },
  })

  tl.to("#hero-key", { duration: 1, scale: 1 })
    .to("#hero-key-logo", { opacity: 0 }, "<")
    .to("#hero-footer", { opacity: 0 }, "<")
    .to("#hero-play-button", { opacity: 0 }, "<")
    .to(
      "#logo-mask",
      {
        maskSize: "clamp(20vh, 25%, 30vh)",
        backgroundSize: "clamp(20vh, 25%, 30vh)",
      },
      0.15
    )
    .to(
      "#scroll-logo-wrapper",
      {
        opacity: 1,
        width: "clamp(20vh, 25%, 30vh)",
      },
      0.15
    )
    .to(
      "#hero-key",
      {
        opacity: 0,
        duration: 0.2,
      },
      0.4
    )
</script>
